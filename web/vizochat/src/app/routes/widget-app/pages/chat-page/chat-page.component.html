<div class="widgetBody h-screen chatbgclr">
    <div class="flex flex-col m-auto h-screen">
        <div class=" flex items-center">
            <button class="py-2 px-0 ml-1 hover:bg-opacity-25 text-gray-400 hover:text-slate-50 rounded-lg hover:bg-white" (click)="backClicked()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="25" height="25" viewBox="0 0 32 32" version="1.1">
                    <path d="M23.505 0c0.271 0 0.549 0.107 0.757 0.316 0.417 0.417 0.417 1.098 0 1.515l-14.258 14.264 14.050 14.050c0.417 0.417 0.417 1.098 0 1.515s-1.098 0.417-1.515 0l-14.807-14.807c-0.417-0.417-0.417-1.098 0-1.515l15.015-15.022c0.208-0.208 0.486-0.316 0.757-0.316z"/>
                </svg>
            </button>
            <div class="rounded-full my-3 mx-1 " style="width: 45px;"> <!--https://cdn-icons-png.flaticon.com/512/147/147133.png-->
                <img src="https://pps.whatsapp.net/v/t61.24694-24/316933356_663876648547132_7871065183614827987_n.jpg?ccb=11-4&oh=01_AdT23fyrxcVTAEqcKKYomRSgw4bZFoMJAVrdZF5gN4tANw&oe=642BB549" alt="" class="w-full rounded-full">
            </div>
            <div>
                <h3 class=" text-xl text-white font-extrabold">user name</h3>
                <p class=" text-xs text-white">Agent</p>
            </div>
            
        </div>
        <div class="flex-1 bg-white rounded-t-2xl w-full bg-opacity-90 overflow-y-auto overflow-x-hidden" #chatScreen>
            <div class="flex-1 rounded-t-2xl p-1 ">
                <div class="mt-auto message-body" >
                    {{(this.chats|async)|json}}
                    <!-- messages start-->
                    <ng-container *ngFor="let m of (chats|async)">

                        <div class="flex justify-end mb-1" *ngIf="m.user.user_type=='wUser'">
                            <div>
                                <div class="mt-4 px-3 py-1 text-sm chatbgclr bg-opacity-70 rounded-bl-3xl rounded-tl-xl rounded-tr-xl text-white">
                                    {{m.message.message}}
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-start mb-1 mt-4 " *ngIf="m.user.user_type=='agent'"> 
                            <img src="https://pps.whatsapp.net/v/t61.24694-24/316933356_663876648547132_7871065183614827987_n.jpg?ccb=11-4&oh=01_AdT23fyrxcVTAEqcKKYomRSgw4bZFoMJAVrdZF5gN4tANw&oe=642BB549" class="object-cover h-5 w-5 rounded-full"
                                alt="" />
                            <div class=" ml-2 px-3 py-1 bg-white shadow-2xl rounded-br-3xl rounded-tr-xl rounded-tl-xl text-gray-800 text-sm">
                                {{m.message.message}}
                            </div>
                        </div>
                    </ng-container>
                    <!-- <div class="flex justify-end mb-1">
                        <div>
                            <div
                                class="mt-4 px-3 text-sm py-1 chatbgclr bg-opacity-70 rounded-bl-3xl rounded-tl-xl rounded-tr-xl text-white">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Debitis,
                                reiciendis!
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-start mb-1 mt-4 "> !--https://source.unsplash.com/vpOeXr5wmR4/600x600-
                        <img src="https://pps.whatsapp.net/v/t61.24694-24/316933356_663876648547132_7871065183614827987_n.jpg?ccb=11-4&oh=01_AdT23fyrxcVTAEqcKKYomRSgw4bZFoMJAVrdZF5gN4tANw&oe=642BB549" class="object-cover h-5 w-5 rounded-full"
                            alt="" />
                        <div class=" ml-2 px-3 py-1 bg-white shadow-2xl rounded-br-3xl rounded-tr-xl rounded-tl-xl text-gray-800 text-sm">
                            happy holiday guys!
                        </div>
                    </div>
                    <div class="flex justify-start mb-1 mt-4 "> --https://source.unsplash.com/vpOeXr5wmR4/600x600-
                        <img src="https://pps.whatsapp.net/v/t61.24694-24/312280849_796924078623090_3149401997141983610_n.jpg?ccb=11-4&oh=01_AdRmZFse__a1zjPG7me0grkvzqYPoV0EGyHglxwHXgzK9Q&oe=643792CC" class="object-cover h-5 w-5 rounded-full"
                            alt="" />
                        <div class=" ml-2 px-3 py-1 bg-white shadow-2xl rounded-br-3xl rounded-tr-xl rounded-tl-xl text-gray-800 text-sm">
                            happy holiday guys!
                        </div>
                    </div> -->
                    <!-- messages end -->   
                </div>
            </div>
        </div>
        <div class="bg-white">
            <form  #f="ngForm" (submit)="send_message(f)" class="flex justify-between border p-1 py-2 opacity-100 rounded-lg shadow-xl bg-white items-center focus-within:border-blue-500 m-1 min-h-12 ">
                <!-- <input type="text" class="outline-none border flex-1 text-lg"> -->
                <textarea placeholder="Type your message" [(ngModel)]="message_input" name="message_input" class="text-base outline-none resize-none flex-1 text-sm max-h-28 min-h-10 overflow-x-hidden overflow-y-auto" rows="1" (input)="onInput($event)"></textarea>
                <button class="outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="25" height="25" viewBox="0 0 24 24" id="send-alt" data-name="Line Color" class="icon line-color opacity-70 hover:opacity-100">
                        <line id="secondary" x1="10.62" y1="13.38" x2="13.57" y2="10.43" style="fill: none; stroke: rgb(44, 169, 188); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"/>
                        <path id="primary" d="M3.69,8.75,19.61,3.06a1,1,0,0,1,1.33,1.33L15.25,20.31a1,1,0,0,1-1.95,0l-2.51-6.52a1,1,0,0,0-.6-.6L3.67,10.7A1,1,0,0,1,3.69,8.75Z" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"/>
                    </svg>
                </button>
            </form>
            <p class="text-center text-[9px] text-gray-400 hover:text-gray-100">&copy;AdDev | VizoChat</p>
        </div>
    </div>
</div>

